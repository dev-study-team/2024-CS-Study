서버의 부하를 분산시켜주는 시스템

<br/><br/><br/>

# 로드 밸런서
![image](https://github.com/dev-study-team/2024-CS-Study/assets/10378777/d35b5595-3707-4c09-a1c8-377585dfc185)

- 서버에 가해지는 부하를 분산해주는 장치 또는 기술을 모두 칭함
- 클라이언트와 서버풀 사이에 위치하여 한 대의 서버로 부하가 집중되지 않도록 트래픽을 관리해 서버 자원을 효율적으로 쓸 수 있도록 함
- 서비스 규모가 작아 서버가 한 대인 경우 로드밸런싱이 필요하지 않음
- 서버 자원(컴퓨팅 파워)을 늘리는 방법에는 ScaleUp과 ScaleOut이 있음

<br/>

### Scale-Up vs Scale-Out
![image](https://github.com/dev-study-team/2024-CS-Study/assets/10378777/64981503-2ba1-4d7f-a037-7943c9122563)


Scale-Up 
- 서버 자체의 물리적인 성능을 확장하는 것을 의미
- 본체의 부품을 업그레이드 하는 것과 같음
- 하드웨어 적인 확장에는 한계가 존재 (예를 들어 돈이 많아도 RAM을 1,000,000GB까지 늘릴 순 없다)

Scale-Out 
- 두 대 이상의 서버를 증설하여 운영하는 것을 의미
- 해당 방식은 여러대의 서버를 사용하기 때문에 트래픽 분산을 위해 로드 밸런싱이 필요

<br/>


## 로드밸런싱  알고리즘
![image](https://github.com/dev-study-team/2024-CS-Study/assets/10378777/63d7b1e1-907e-4225-92e5-42160ee6792f)

### 라운드 로빈 방식 (Round Robin)
- 서버에 들어온 요청을 순서대로 돌아가며 배정하는 방식
- 여러대의 서버가 동일한 스펙을 가지고 있고, 세션 타임이 길지 않은 경우 적합
### 가중 라운드 로빈 (Weighted Round Robin)
- 각 서버마다 가중치를 매기고, 가중치가 높은 서버에 클라이언트 요청을 우선 배분
- 서버의 트래픽 처리 능력이 상이한 경우 사용되는 부하 분산 방식
### IP 해시 방식 (IP Hash)
- 클라이언트 IP 주소를 특정 서버로 매핑하여 처리하는 방식
- 사용자가 항상 동일한 서버로 연결되는 것을 보장
### 최소 연결 방식 (Least Connection)
- 요청이 들어온 시점에 가장 적은 연결상태를 가지고 있는 서버에 우선적으로 배분
- 세션 타임이 길어지는 경우가 간혈적으로 있거나, 서버에 분배된 트래픽들이 일정하지 않은 경우 적합
### 최소 리스폰타임 (Least Response Time)
- 서버의 현재 연결 상태와 응답시간을 모두 고려하여 트래픽을 배분
- 가장 적은 연결 상태 + 가장 짧은 응답시간을 보이는 서버를 한가하다고 판단하여 우선적으로 배분

<br/><br/><br/>


# 로드 밸런스 예시
가장 많이 사용되는 로드밸런서로 L4, L7 존재함

![image](https://github.com/dev-study-team/2024-CS-Study/assets/10378777/569aa3bc-2944-4340-8c96-aaf05a664f2f)


<br/>

### L4 로드밸런서 (TCP/UDP)
- 4계층 이하의 정보를 가지고 트래픽을 분산
- 특히 MAC, IP, Port, 전송 프로토콜을 기준으로 분산 처리
- Port 정보를 바탕으로 분산이 가능하기 때문에, 한 대의 서버에서 여러 포트를 운용하는 경우 L4 이상을 사용해야함
- 패킷 내용을 살펴볼 수 없음 (캡슐화로 인해)
- 사용자의 IP가 수시로 바뀌는 경우라면 연속적인 서비스를 제공하기 어려움

<br/>

### L7 로드밸런서 (애플리케이션)
- 응용 계층(e.g. HTTP, FTP, SMTP)의 정보를 가지고 트래픽을 분산
    - HTTP 헤더, 쿠키 등 사용자의 요청 확인 가능
- 전체 패킷 내용을 확인하고 분산하기 때문에 네트워크 보안 분야에서도 활용
    - DDOS 같은 비정상적인 트래픽도 필터링 가능
    - 특정한 패턴을 지닌 바이러스를 감지해 네트워크 보호 가능
- 캐싱 기능 제공
- 최상위 계층까지 확인해야하기 때문에 비용이 가장 비쌈


<br/><br/><br/>



# 참고자료
https://aws.amazon.com/ko/what-is/load-balancing/

https://m.post.naver.com/viewer/postView.naver?volumeNo=27046347&memberNo=2521903

https://gruuuuu.github.io/network/lb01/
